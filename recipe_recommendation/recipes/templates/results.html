{% extends 'base.html' %}
{% load static %}

{% block title %}Recipe Results{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/results.css' %}">
{% endblock %}

{% block content %}
<header class="results-header">
    <div class="container">
        <div class="logo">Flavor Finder</div>
        <div class="tagline">Discover, Cook, Enjoy ‚Äî Recipes That Inspire</div>
    </div>
</header>

<main class="main-content">
    <section class="recipes-container">
        <h2 class="section-title">Today's Recommendations</h2>

        <div class="recipe-grid">
            {% for recipe in recipes %}
            <div class="recipe-card">
                <a href="{% url 'recipe_detail' recipe.id %}">
                    <img src="{{ recipe.image_url }}" alt="{{ recipe.title }}" class="recipe-image">
                </a>
                <div class="recipe-info">
                    <span class="recipe-type">{{ recipe.recipe_type }}</span>
                    <h3 class="recipe-name">{{ recipe.title }}</h3>
                    
                    <!-- Time and Servings Meta -->
                    <div class="recipe-meta">
                        <div class="meta-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                            <span>‚è±Ô∏è 
                                {% if recipe.time_details %}
                                    <span>‚è±Ô∏è 
                                        {% if recipe.time_details.Prep_Time %} Prep: {{ recipe.time_details.Prep_Time }}, {% endif %}
                                        {% if recipe.time_details.Cook_Time %} Cook: {{ recipe.time_details.Cook_Time }}, {% endif %}
                                        {% if recipe.time_details.Total_Time %} Total: {{ recipe.time_details.Total_Time }} {% endif %}
                                    </span>
                                {% else %}
                                    <span>‚è±Ô∏è Cook Time: {{ recipe.cooking_time|default:"30 mins" }}</span>
                                {% endif %}

                            </span>
                        </div>
                        
                        <!-- Display Servings Properly (Fixed) -->
                        <div class="meta-item">
                            üçΩÔ∏è Servings: {% if recipe.servings and recipe.servings != "N/A" %} {{ recipe.servings }} {% else %} Not Available {% endif %}
                        </div>
                        
                    </div>

                    <a href="{% url 'recipe_detail' recipe.id %}" class="explore-btn">View Recipe</a>
                </div>
            </div>
            {% empty %}
            <div class="no-results">
                <p>No recipes found. Try searching again.</p>
            </div>
            {% endfor %}
        </div>
    </section>
</main>

<!-- Pagination Section -->
<div class="pagination">
    {% if recipes.has_previous %}
        <a href="?page=1" class="page-btn">First</a>
        <a href="?page={{ recipes.previous_page_number }}" class="page-btn">Previous</a>
    {% endif %}

    <span class="current-page">Page {{ recipes.number }} of {{ recipes.paginator.num_pages }}</span>

    {% if recipes.has_next %}
        <a href="?page={{ recipes.next_page_number }}" class="page-btn">Next</a>
        <a href="?page={{ recipes.paginator.num_pages }}" class="page-btn">Last</a>
    {% endif %}
</div>

{% endblock %}
